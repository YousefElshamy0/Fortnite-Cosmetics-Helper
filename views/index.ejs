<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="/styles.css" rel="stylesheet" />
    <title>Fortnite Cosmetics Helper</title>
    <link rel="icon" type="image/png" href="/images/favicon.png" />
  </head>
  <body>
    <header class="text-center my-3">
      <a href="/" class="logo-link">
        <h1 class="logo">FORTNITE COSMETICS HELPER</h1>
      </a>
    </header>

    <% if(locals.data){ %>
      <% if(mode==="latest"){ %>
        <h2>Showing Upcoming Cosmetics: <%= entries %></h2>
      <% } else if(mode==="search"){ %>
        <h2>Showing Cosmetics: <%= entries %></h2>
      <% } %>

      <form action="/search" method="get" class="input-group mb-3">
        <input
          type="search"
          class="form-control"
          name="q"
          placeholder="Type Any Cosmetic"
          aria-label="Search Box"
          aria-describedby="basic-addon2"
        />
        <button type="submit" class="btn btn-secondary">Search</button>
      </form>

      <% if(data && data.length > 0){ %>
        <div class="container my-4">
          <div class="row g-3">
            <% data.forEach(function(item){ %>
              <div class="col-6 col-sm-6 col-md-4 col-lg-3">
                <div class="card h-100 rarity-<%= item.rarity ? item.rarity.name.toLowerCase() : "common" %>">
                  <img
                    src="<%= item.images && item.images.icon ? item.images.icon : '/images/placeholder.png' %>"
                    onerror="this.onerror=null; this.src='/images/placeholder.png';"
                    class="card-img-top"
                    alt="<%= item.name %>"
                  />
                  <div class="card-body">
                    <h5 class="card-title"><%= item.name %></h5>
                    <p class="card-text">
                      <%= item.description || "No description available" %>
                    </p>
                  </div>
                </div>
              </div>
            <% }) %>
          </div>
        </div>
      <% } %>
    <% } %>

    <% if (locals.error) { %>
      <div id="tag-error" class="tag-error"><%= error %></div>
    <% } %>

    <footer class="text-center mt-4 mb-2">
      <p >
        © 2025 Shamy — Educational project. Not affiliated with Epic Games or Andrew Tate
      </p>
    </footer>
  </body>
</html>
